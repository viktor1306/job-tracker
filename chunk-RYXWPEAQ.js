import{d as O,f as J,i as j,l as z}from"./chunk-OVBUED2H.js";import{Ca as D,Ea as b,Hb as U,Ka as h,Pa as _,Ua as T,ab as k,eb as a,fb as s,mb as I,ob as A,pb as l,qb as F,yb as w}from"./chunk-R7B6ZDYQ.js";import"./chunk-ODN5LVDJ.js";function Q(o,c){if(o&1&&(a(0,"div")(1,"p"),l(2,' \u0429\u043E\u0431 \u0456\u043C\u043F\u043E\u0440\u0442\u0443\u0432\u0430\u0442\u0438 \u0432\u0430\u0448\u0456 \u0432\u0456\u0434\u0433\u0443\u043A\u0438, \u043F\u0440\u043E\u0441\u0442\u043E \u043F\u0435\u0440\u0435\u0442\u044F\u0433\u043D\u0456\u0442\u044C \u0446\u044E \u043A\u043D\u043E\u043F\u043A\u0443 \u043D\u0430 \u0432\u0430\u0448\u0443 \u043F\u0430\u043D\u0435\u043B\u044C \u0437\u0430\u043A\u043B\u0430\u0434\u043E\u043A \u0443 \u0431\u0440\u0430\u0443\u0437\u0435\u0440\u0456. \u041F\u0456\u0441\u043B\u044F \u0446\u044C\u043E\u0433\u043E, \u0437\u0430\u0439\u0434\u0456\u0442\u044C \u043D\u0430 \u0441\u0442\u043E\u0440\u0456\u043D\u043A\u0443 "\u041C\u043E\u0457 \u0432\u0456\u0434\u0433\u0443\u043A\u0438" \u043D\u0430 Work.ua \u0456 \u043D\u0430\u0442\u0438\u0441\u043D\u0456\u0442\u044C \u043D\u0430 \u0446\u044E \u0437\u0430\u043A\u043B\u0430\u0434\u043A\u0443. '),s(),a(3,"div",5)(4,"a",6),l(5," \u0406\u043C\u043F\u043E\u0440\u0442\u0443\u0432\u0430\u0442\u0438 \u0437 Work.ua "),s()()()),o&2){let n=I();b(4),k("href",n.bookmarkletUrl,D)}}function R(o,c){if(o&1&&(a(0,"p",7),l(1),s()),o&2){let n=I();b(),F(n.errorMessage)}}var P=class o{constructor(c,n){this.sanitizer=c;this.authService=n}bookmarkletUrl=null;errorMessage=null;ngOnInit(){let n=this.authService._session.getValue()?.session?.access_token,x="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9hcWp4enF1ZWtnbGFsdG50ZHJhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTYzMjQwMjAsImV4cCI6MjA3MTkwMDAyMH0.ryUeEJLA5nNBK_DEvj1TQPhPbgaZEM1crFQXXFourmk";if(!n){this.errorMessage="\u041F\u043E\u043C\u0438\u043B\u043A\u0430: \u043D\u0435 \u0432\u0434\u0430\u043B\u043E\u0441\u044F \u043E\u0442\u0440\u0438\u043C\u0430\u0442\u0438 \u0442\u043E\u043A\u0435\u043D \u0434\u043E\u0441\u0442\u0443\u043F\u0443. \u0411\u0443\u0434\u044C \u043B\u0430\u0441\u043A\u0430, \u0441\u043F\u0440\u043E\u0431\u0443\u0439\u0442\u0435 \u0432\u0438\u0439\u0442\u0438 \u0456 \u0437\u0430\u0439\u0442\u0438 \u0437\u043D\u043E\u0432\u0443.";return}let L=`((${(Z=>{let m=(()=>{let t=null;return(r,i="info")=>{t&&t.remove();let u="rgba(0, 123, 255, 0.5)";i==="success"&&(u="rgba(40, 167, 69, 0.5)"),i==="error"&&(u="rgba(220, 53, 69, 0.5)");let e=document.createElement("div");t=e,e.style.position="fixed",e.style.bottom="20px",e.style.right="20px",e.style.padding="15px 25px",e.style.borderRadius="16px",e.style.color="#ffffffff",e.style.zIndex="9999",e.style.fontFamily='"Segoe UI", Roboto, Helvetica, Arial, sans-serif',e.style.fontSize="16px",e.style.maxWidth="350px",e.style.background="rgba(22, 33, 62, 0.3)",e.style.backdropFilter="blur(10px)",e.style.border="1px solid rgba(255, 255, 255, 0.2)",e.style.boxShadow="0 8px 32px 0 rgba(0, 0, 0, 0.3)",e.style.borderLeft=`5px solid ${u}`,e.innerText=r,document.body.appendChild(e),setTimeout(()=>{e&&e.remove(),t===e&&(t=null)},5e3)}})();m("\u041F\u043E\u0447\u0438\u043D\u0430\u044E \u0456\u043C\u043F\u043E\u0440\u0442! \u0411\u0443\u0434\u044C \u043B\u0430\u0441\u043A\u0430, \u0437\u0430\u0447\u0435\u043A\u0430\u0439\u0442\u0435...");let $=new Date("2025-09-01T00:00:00Z"),E=document.getElementById("react-apply-history");if(!E){alert("\u041F\u043E\u043C\u0438\u043B\u043A\u0430: \u043D\u0435 \u0432\u0434\u0430\u043B\u043E\u0441\u044F \u0437\u043D\u0430\u0439\u0442\u0438 #react-apply-history.");return}let v=E.querySelectorAll(":scope > div")[1];if(!v){alert("\u041F\u043E\u043C\u0438\u043B\u043A\u0430: \u043D\u0435 \u0432\u0434\u0430\u043B\u043E\u0441\u044F \u0437\u043D\u0430\u0439\u0442\u0438 \u043A\u043E\u043D\u0442\u0435\u0439\u043D\u0435\u0440 \u0441\u0442\u043E\u0440\u0456\u043D\u043A\u0438.");return}let M=v.querySelector(":scope > div");if(!M){alert("\u041F\u043E\u043C\u0438\u043B\u043A\u0430: \u043D\u0435 \u0432\u0434\u0430\u043B\u043E\u0441\u044F \u0437\u043D\u0430\u0439\u0442\u0438 \u043A\u043E\u043D\u0442\u0435\u0439\u043D\u0435\u0440 \u0441\u043F\u0438\u0441\u043A\u0443 \u0432\u0456\u0434\u0433\u0443\u043A\u0456\u0432.");return}let B=M.querySelectorAll(":scope > div"),p=[],y=0;B.forEach(t=>{try{let r=t.querySelector("h2 a"),i=t.querySelectorAll("div"),u=i[i.length-1],e=i[1]?.querySelector("span"),f=null;if(u){let S=u.innerText.split(",")[0].trim(),H=new Date().getFullYear().toString(),N={\u0441\u0456\u0447\u043D\u044F:"01",\u043B\u044E\u0442\u043E\u0433\u043E:"02",\u0431\u0435\u0440\u0435\u0437\u043D\u044F:"03",\u043A\u0432\u0456\u0442\u043D\u044F:"04",\u0442\u0440\u0430\u0432\u043D\u044F:"05",\u0447\u0435\u0440\u0432\u043D\u044F:"06",\u043B\u0438\u043F\u043D\u044F:"07",\u0441\u0435\u0440\u043F\u043D\u044F:"08",\u0432\u0435\u0440\u0435\u0441\u043D\u044F:"09",\u0436\u043E\u0432\u0442\u043D\u044F:"10",\u043B\u0438\u0441\u0442\u043E\u043F\u0430\u0434\u0430:"11",\u0433\u0440\u0443\u0434\u043D\u044F:"12"},g=S.split(" ");if(g.length>=2){let X=g[0].padStart(2,"0"),W=N[g[1]];f=`${g.find(q=>/^\d{4}$/.test(q))||H}-${W}-${X}`}}r&&f?new Date(f+"T00:00:00Z")>=$?p.push({vacancy_title:r.innerText,vacancy_url:r.href,platform:"Work.ua",date_applied:f,status:"\u041F\u043E\u0434\u0430\u043D\u043E",salary:e?e.innerText:"",notes:""}):y++:console.warn("\u041F\u0440\u043E\u043F\u0443\u0449\u0435\u043D\u043E \u043A\u0430\u0440\u0442\u043A\u0443 \u0431\u0435\u0437 \u043D\u0430\u0437\u0432\u0438 \u0430\u0431\u043E \u0434\u0430\u0442\u0438:",t)}catch(r){console.warn("\u041D\u0435 \u0432\u0434\u0430\u043B\u043E\u0441\u044F \u0440\u043E\u0437\u043F\u0430\u0440\u0441\u0438\u0442\u0438 \u043A\u0430\u0440\u0442\u043A\u0443.",r)}});let d="";if(p.length>0?d+=`\u0417\u043D\u0430\u0439\u0434\u0435\u043D\u043E ${p.length} \u043D\u043E\u0432\u0438\u0445 \u0432\u0430\u043A\u0430\u043D\u0441\u0456\u0439 \u0434\u043B\u044F \u0456\u043C\u043F\u043E\u0440\u0442\u0443.
`:d+=`\u041D\u043E\u0432\u0438\u0445 \u0432\u0430\u043A\u0430\u043D\u0441\u0456\u0439 \u0434\u043B\u044F \u0456\u043C\u043F\u043E\u0440\u0442\u0443 \u043D\u0435 \u0437\u043D\u0430\u0439\u0434\u0435\u043D\u043E.
`,y>0&&(d+=`\u041F\u0440\u043E\u043F\u0443\u0449\u0435\u043D\u043E ${y} \u0441\u0442\u0430\u0440\u0438\u0445 \u0432\u0430\u043A\u0430\u043D\u0441\u0456\u0439.`),m(d),p.length===0)return;fetch("https://oaqjxzquekglaltntdra.supabase.co/functions/v1/bulk-add-vacancies",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Z}`,apikey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9hcWp4enF1ZWtnbGFsdG50ZHJhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTYzMjQwMjAsImV4cCI6MjA3MTkwMDAyMH0.ryUeEJLA5nNBK_DEvj1TQPhPbgaZEM1crFQXXFourmk"},body:JSON.stringify({vacancies:p})}).then(t=>t.ok?t.json():t.text().then(r=>{throw new Error(r)})).then(t=>{m(`\u0423\u0441\u043F\u0456\u0448\u043D\u043E \u0456\u043C\u043F\u043E\u0440\u0442\u043E\u0432\u0430\u043D\u043E! ${t.message||JSON.stringify(t)}`,"success");let r=new BroadcastChannel("job_tracker_channel");r.postMessage("refresh_vacancies"),r.close()}).catch(t=>{console.error("\u041F\u043E\u043C\u0438\u043B\u043A\u0430 \u0456\u043C\u043F\u043E\u0440\u0442\u0443:",t),m(`\u0421\u0442\u0430\u043B\u0430\u0441\u044F \u043F\u043E\u043C\u0438\u043B\u043A\u0430 \u043F\u0456\u0434 \u0447\u0430\u0441 \u0456\u043C\u043F\u043E\u0440\u0442\u0443: ${t.message}`,"error")})}).toString()})('${n}'))`;this.bookmarkletUrl=this.sanitizer.bypassSecurityTrustUrl(`javascript:${encodeURIComponent(L)}`)}static \u0275fac=function(n){return new(n||o)(h(j),h(U))};static \u0275cmp=_({type:o,selectors:[["app-import"]],decls:9,vars:2,consts:[["errorTemplate",""],[1,"import-container"],[1,"import-card"],[4,"ngIf","ngIfElse"],["routerLink","/",1,"back-link"],[1,"bookmarklet-wrapper"],[1,"bookmarklet-btn",3,"href"],[1,"error-message"]],template:function(n,x){if(n&1&&(a(0,"div",1)(1,"div",2)(2,"h2"),l(3,"\u0406\u043C\u043F\u043E\u0440\u0442 \u0437 Work.ua"),s(),T(4,Q,6,1,"div",3)(5,R,2,1,"ng-template",null,0,w),a(7,"a",4),l(8,"\u041F\u043E\u0432\u0435\u0440\u043D\u0443\u0442\u0438\u0441\u044C \u043D\u0430 \u0433\u043E\u043B\u043E\u0432\u043D\u0443"),s()()()),n&2){let C=A(6);b(4),k("ngIf",x.bookmarkletUrl)("ngIfElse",C)}},dependencies:[J,O,z],styles:["[_nghost-%COMP%]{display:flex;justify-content:center;align-items:center}.import-card[_ngcontent-%COMP%]{background:#ffffff1a;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.2);border-radius:16px;padding:2rem 3rem;max-width:600px;text-align:center;color:#fff}.bookmarklet-wrapper[_ngcontent-%COMP%]{margin:2rem 0;padding:1.5rem;background:#0003;border-radius:8px}.bookmarklet-wrapper[_ngcontent-%COMP%]   a.bookmarklet-btn[_ngcontent-%COMP%]{background-color:#8c8c8c80!important;color:#fff!important;border:1px solid rgba(255,255,255,.2)!important;padding:1rem 2rem;border-radius:8px;text-decoration:none;font-weight:500;cursor:grab;transition:all .2s}.bookmarklet-wrapper[_ngcontent-%COMP%]   a.bookmarklet-btn[_ngcontent-%COMP%]:hover{background-color:#007bffcc!important;border-color:#ffffff80!important}.back-link[_ngcontent-%COMP%]{color:#92b4f4;text-decoration:none;margin-top:1rem;display:inline-block}.back-link[_ngcontent-%COMP%]:hover{text-decoration:underline}"]})};export{P as ImportComponent};
